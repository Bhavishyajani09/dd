<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Detail - Online Furniture Store</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="bg-white border-bottom">
        <div class="container-fluid px-3 px-md-5">
            <div class="d-flex align-items-center py-4">
                <a href="index.html">
                    <img src="img/kayuu-logo-dark.svg" alt="KAYUU logo" style="width: 140px">
                </a>
                <nav class="d-none d-lg-block ms-auto">
                    <ul class="list-unstyled d-flex gap-4 m-0">
                        <li><a href="index.html" class="text-muted text-decoration-none">Home</a></li>
                        <li><a href="product.html" class="text-muted text-decoration-none">Products</a></li>
                        <li><a href="room.html" class="text-muted text-decoration-none">Rooms</a></li>
                        <li><a href="aboutus.html" class="text-muted text-decoration-none">About Us</a></li>
                        <li><a href="contactus.html" class="text-muted text-decoration-none">Contact Us</a></li>
                    </ul>
                </nav>
                <div class="cart cart-icon d-none d-lg-block position-relative ms-4">
                    <i class="fa-solid fa-basket-shopping text-warning fs-4"></i>
                    <span class="count cart-count position-absolute top-0 start-100 translate-middle badge rounded-circle bg-warning text-dark">0</span>
                </div>
                <div class="d-lg-none d-flex align-items-center gap-3 ms-auto">
                    <div class="cart-icon position-relative">
                        <i class="fa-solid fa-basket-shopping text-warning fs-4"></i>
                        <span class="cart-count position-absolute top-0 start-100 translate-middle badge rounded-circle bg-warning text-dark" style="font-size: 0.7rem;">0</span>
                    </div>
                    <button class="btn btn-light border" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar">
                        <i class="fa-solid fa-bars text-muted fs-4"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Mobile Navigation Offcanvas -->
    <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasNavbar">
        <div class="offcanvas-header bg-white">
            <a href="index.html">
                <img src="img/kayuu-logo-dark.svg" alt="KAYUU logo" style="width: 120px">
            </a>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
        </div>
        <div class="offcanvas-body bg-white">
            <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
                <li class="nav-item">
                    <a class="nav-link text-dark" href="index.html">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-dark" href="product.html">Products</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-dark" href="room.html">Rooms</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-dark" href="aboutus.html">About Us</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-dark" href="contactus.html">Contact Us</a>
                </li>
            </ul>
        </div>
    </div>

    <main class="py-3 py-md-5">
        <div class="container">
            <nav aria-label="breadcrumb" class="mb-4">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                    <li class="breadcrumb-item"><a href="product.html">Products</a></li>
                    <li class="breadcrumb-item active" aria-current="page" id="product-breadcrumb">Product</li>
                </ol>
            </nav>

            <div class="row g-4 g-md-5">
                <div class="col-md-6">
                    <img id="product-image" src="" class="img-fluid rounded" alt="">
                </div>
                <div class="col-md-6">
                    <h1 id="product-name" class="display-6 display-md-5 fw-bold mb-3"></h1>
                    <h3 id="product-price" class="text-warning mb-4 fs-4 fs-md-3"></h3>
                    <p id="product-description" class="text-secondary mb-4">
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Habitasse eaque wisi molestie, mollis pharetra convallis exercitation, distinctio eu arcu fugit nibh donec exercitationem, quisque imperdiet mattis proident.
                    </p>
                    
                    <div class="mb-4">
                        <h5>Features</h5>
                        <ul class="list-unstyled">
                            <li><i class="fas fa-check text-warning me-2"></i>Etiam eu tortor tempor, malesuada</li>
                            <li><i class="fas fa-check text-warning me-2"></i>Nunc vitae erat sit amet neque varius consequat</li>
                            <li><i class="fas fa-check text-warning me-2"></i>Lorem ipsum dolor sit amet</li>
                        </ul>
                    </div>

                    <div class="d-flex flex-column flex-sm-row align-items-start align-items-sm-center gap-3 mb-4">
                        <span class="fw-semibold">Quantity:</span>
                        <div class="input-group" style="width: 140px;">
                            <button class="btn btn-outline-secondary" type="button" id="decrease-qty">-</button>
                            <input type="text" class="form-control text-center" value="1" id="quantity-input">
                            <button class="btn btn-outline-secondary" type="button" id="increase-qty">+</button>
                        </div>
                    </div>

                    <button id="add-to-cart" class="btn btn-warning btn-lg fw-bold w-100 w-sm-auto px-5 py-3 mb-3">
                        <i class="fas fa-shopping-cart me-2"></i>ADD TO CART
                    </button>
                </div>
            </div>

            <div class="row mt-4 mt-md-5">
                <div class="col-12">
                    <ul class="nav nav-tabs" id="productTabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="description-tab" data-bs-toggle="tab" data-bs-target="#description" type="button">Description</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="reviews-tab" data-bs-toggle="tab" data-bs-target="#reviews" type="button">Reviews (0)</button>
                        </li>
                    </ul>
                    <div class="tab-content" id="productTabsContent">
                        <div class="tab-pane fade show active" id="description" role="tabpanel">
                            <div class="p-4">
                                <h5>Features</h5>
                                <p>Ut at ante diam. Vestibulum tincidunt lacus quis odio iaculis, nec iaculis ipsum hendrerit. Curabitur nec fringilla sem. Nullam at diam et ligula tincidunt luctus. Ut fringilla vitae orci eget suscipit. Etiam ultricies justo ac feugiat dignissim.</p>
                                <ul>
                                    <li><i class="fas fa-check text-warning me-2"></i>Etiam eu tortor tempor, malesuada</li>
                                    <li><i class="fas fa-check text-warning me-2"></i>Nunc vitae erat sit amet neque varius consequat</li>
                                    <li><i class="fas fa-check text-warning me-2"></i>Lorem ipsum dolor sit amet</li>
                                </ul>
                                
                                <h5 class="mt-4">Care Instructions</h5>
                                <p>Ut at ante diam. Vestibulum tincidunt lacus quis odio iaculis, nec iaculis ipsum hendrerit.</p>
                                <ul>
                                    <li><i class="fas fa-check text-warning me-2"></i>Etiam eu tortor tempor, malesuada</li>
                                    <li><i class="fas fa-check text-warning me-2"></i>Nunc vitae erat sit amet neque varius consequat</li>
                                    <li><i class="fas fa-check text-warning me-2"></i>Vivamus lobortis posuere ante</li>
                                    <li><i class="fas fa-check text-warning me-2"></i>Morbi nisl diam, cursus non ultricies</li>
                                    <li><i class="fas fa-check text-warning me-2"></i>Lorem ipsum dolor sit amet</li>
                                </ul>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="reviews" role="tabpanel">
                            <div class="p-4">
                                <p>No reviews yet.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <div id="shopping-cart-popup" class="cart-sidebar">
        <div class="cart-header">
            <h5 class="mb-0">Shopping Cart</h5>
            <button id="close-cart-btn" class="btn-close"></button>
        </div>
        <div class="cart-body">
            <div class="cart-items-container"></div>
        </div>
        <div class="cart-footer">
            <div id="cart-buttons" class="d-grid">
                <a href="product.html" class="btn btn-warning fw-bold py-3" style="background-color: #f4b942; border: none; font-size: 14px; letter-spacing: 0.5px; text-decoration: none; color: #333;">CONTINUE SHOPPING</a>
            </div>
            <div id="checkout-buttons" style="display: none;">
                <div id="subtotal-section" class="d-flex justify-content-between align-items-center mb-3">
                    <span class="fw-bold">Subtotal:</span>
                    <span id="cart-subtotal" class="fw-bold">$0.00</span>
                </div>
                <div class="d-grid gap-2">
                    <button class="btn btn-warning fw-bold py-3" style="background-color: #f4b942; border: none; font-size: 14px; letter-spacing: 0.5px; color: #333;">VIEW CART</button>
                    <button class="btn btn-warning fw-bold py-3" style="background-color: #f4b942; border: none; font-size: 14px; letter-spacing: 0.5px; color: #333;">CHECKOUT</button>
                </div>
            </div>
        </div>
    </div>

    <div id="add-to-cart-notification" class="cart-notification"></div>

    <style>
        /* Cart Sidebar Styles */
        .cart-sidebar {
            position: fixed;
            top: 0;
            right: -400px;
            width: 400px;
            height: 100vh;
            background: white;
            box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            transition: right 0.3s ease;
            z-index: 1050;
            display: flex;
            flex-direction: column;
        }
        .cart-sidebar.visible {
            right: 0;
        }
        .cart-header {
            padding: 20px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .cart-header h5 {
            font-size: 18px;
            font-weight: 600;
            color: #333;
        }
        .cart-body {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }
        .cart-footer {
            padding: 20px;
            border-top: 1px solid #eee;
        }
        .empty-cart {
            text-align: center;
            color: #999;
            margin-top: 50px;
        }
        .cart-notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #f4b942;
            color: #333;
            padding: 12px 20px;
            border-radius: 4px;
            transform: translateX(400px);
            transition: transform 0.3s ease;
            z-index: 1060;
            font-size: 14px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        .cart-notification.show {
            transform: translateX(0);
        }
        .cart-item {
            border-bottom: 1px solid #f0f0f0;
            padding-bottom: 15px;
        }
        /* Responsive Design */
        @media (max-width: 768px) {
            .cart-sidebar {
                width: 100vw;
                right: -100vw;
            }
            .display-6 {
                font-size: 2rem;
            }
            .btn-lg {
                padding: 12px 30px;
                font-size: 1rem;
            }
            .input-group {
                width: 120px !important;
            }
        }
        @media (max-width: 480px) {
            .cart-sidebar {
                width: 100vw;
                right: -100vw;
            }
            .display-6 {
                font-size: 1.5rem;
            }
            .container {
                padding: 0 15px;
            }
            .btn-lg {
                padding: 10px 20px;
                font-size: 0.9rem;
            }
            .tab-content {
                padding: 15px;
            }
        }
        
        /* Force hide continue shopping when cart has products */
        .cart-sidebar:has(.cart-item) #cart-buttons {
            display: none !important;
        }
    </style>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="cart-common.js"></script>
    <script src="cart.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            let currentProduct = null;
            
            const urlParams = new URLSearchParams(window.location.search);
            const productId = urlParams.get('id');
            
            if (productId) {
                fetch('products.json')
                    .then(response => response.json())
                    .then(products => {
                        const product = products.find(p => p.id == productId);
                        if (product) {
                            currentProduct = product;
                            document.getElementById('product-name').textContent = product.name;
                            document.getElementById('product-price').textContent = `$${product.price.toFixed(2)}`;
                            document.getElementById('product-image').src = product.image;
                            document.getElementById('product-image').alt = product.alt_text;
                            document.getElementById('product-breadcrumb').textContent = product.name;
                            document.getElementById('add-to-cart').setAttribute('data-product-id', product.id);
                        }
                    });
            }

            // Quantity controls
            document.getElementById('decrease-qty').addEventListener('click', () => {
                const input = document.getElementById('quantity-input');
                const value = parseInt(input.value);
                if (value > 1) input.value = value - 1;
            });

            document.getElementById('increase-qty').addEventListener('click', () => {
                const input = document.getElementById('quantity-input');
                input.value = parseInt(input.value) + 1;
            });
            
            // Add to cart functionality
            document.addEventListener('click', (e) => {
                if (e.target.id === 'add-to-cart' && currentProduct && window.cartManager) {
                    const quantity = parseInt(document.getElementById('quantity-input').value);
                    window.cartManager.addToCart(currentProduct, quantity);
                }
            });
        });
    </script>
</body>
</html>